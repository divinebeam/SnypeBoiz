/*
deg rad     sin     cos     tan
0   0       0.0000  1.0000  0.0000
1   0.0175  0.0175  0.9998  0.0175
2   0.0349  0.0349  0.9994  0.0349
3   0.0524  0.0523  0.9986  0.0524
4   0.0698  0.0698  0.9976  0.0699
5   0.0873  0.0872  0.9962  0.0875
6   0.1047  0.1045  0.9945  0.1051
7   0.1222  0.1219  0.9925  0.1228
8   0.1396  0.1392  0.9903  0.1405
9   0.1571  0.1564  0.9877  0.1584
10  0.1745  0.1736  0.9848  0.1763
11  0.192   0.1908  0.9816  0.1944
12  0.2094  0.2079  0.9781  0.2126
13  0.2269  0.2250  0.9744  0.2309
14  0.2443  0.2419  0.9703  0.2493
15  0.2618  0.2588  0.9659  0.2679
16  0.2793  0.2756  0.9613  0.2867
17  0.2967  0.2924  0.9563  0.3057
18  0.3142  0.3090  0.9511  0.3249
19  0.3316  0.3256  0.9455  0.3443
20  0.3491  0.3420  0.9397  0.3640
21  0.3665  0.3584  0.9336  0.3839
22  0.384   0.3746  0.9272  0.4040
23  0.4014  0.3907  0.9205  0.4245
24  0.4189  0.4067  0.9135  0.4452
25  0.4363  0.4226  0.9063  0.4663
26  0.4538  0.4384  0.8988  0.4877
27  0.4712  0.4540  0.8910  0.5095
28  0.4887  0.4695  0.8829  0.5317
29  0.5061  0.4848  0.8746  0.5543
30  0.5236  0.5000  0.8660  0.5774
31  0.5411  0.5150  0.8572  0.6009
32  0.5585  0.5299  0.8480  0.6249
33  0.576   0.5446  0.8387  0.6494
34  0.5934  0.5592  0.8290  0.6745
35  0.6109  0.5736  0.8192  0.7002
36  0.6283  0.5878  0.8090  0.7265
37  0.6458  0.6018  0.7986  0.7536
38  0.6632  0.6157  0.7880  0.7813
39  0.6807  0.6293  0.7771  0.8098
40  0.6981  0.6428  0.7660  0.8391
41  0.7156  0.6561  0.7547  0.8693
42  0.733   0.6691  0.7431  0.9004
43  0.7505  0.6820  0.7314  0.9325
44  0.7679  0.6947  0.7193  0.9657
45  0.7854  0.7071  0.7071  1.0000
46  0.8029  0.7193  0.6947  1.0355
47  0.8203  0.7314  0.6820  1.0724
48  0.8378  0.7431  0.6691  1.1106
49  0.8552  0.7547  0.6561  1.1504
50  0.8727  0.7660  0.6428  1.1918
51  0.8901  0.7771  0.6293  1.2349
52  0.9076  0.7880  0.6157  1.2799
53  0.925   0.7986  0.6018  1.3270
54  0.9425  0.8090  0.5878  1.3764
55  0.9599  0.8192  0.5736  1.4281
56  0.9774  0.8290  0.5592  1.4826
57  0.9948  0.8387  0.5446  1.5399
58  1.0123  0.8480  0.5299  1.6003
59  1.0297  0.8572  0.5150  1.6643
60  1.0472  0.8660  0.5000  1.7321
61  1.0647  0.8746  0.4848  1.8040
62  1.0821  0.8829  0.4695  1.8807
63  1.0996  0.8910  0.4540  1.9626
64  1.117   0.8988  0.4384  2.0503
65  1.1345  0.9063  0.4226  2.1445
66  1.1519  0.9135  0.4067  2.2460
67  1.1694  0.9205  0.3907  2.3559
68  1.1868  0.9272  0.3746  2.4751
69  1.2043  0.9336  0.3584  2.6051
70  1.2217  0.9397  0.3420  2.7475
71  1.2392  0.9455  0.3256  2.9042
72  1.2566  0.9511  0.3090  3.0777
73  1.2741  0.9563  0.2924  3.2709
74  1.2915  0.9613  0.2756  3.4874
75  1.309   0.9659  0.2588  3.7321
76  1.3265  0.9703  0.2419  4.0108
77  1.3439  0.9744  0.2250  4.3315
78  1.3614  0.9781  0.2079  4.7046
79  1.3788  0.9816  0.1908  5.1446
80  1.3963  0.9848  0.1736  5.6713
81  1.4137  0.9877  0.1564  6.3138
82  1.4312  0.9903  0.1392  7.1154
83  1.4486  0.9925  0.1219  8.1443
84  1.4661  0.9945  0.1045  9.5144
85  1.4835  0.9962  0.0872  11.4301
86  1.501   0.9976  0.0698  14.3007
87  1.5184  0.9986  0.0523  19.0811
88  1.5359  0.9994  0.0349  28.6363
89  1.5533  0.9998  0.0175  57.2900
90  1.5708  1.0000  0.0000
*/

const sin_table = py_eval("[\
    (0.0000),\
    (0.0175),\
    (0.0349),\
    (0.0523),\
    (0.0698),\
    (0.0872),\
    (0.1045),\
    (0.1219),\
    (0.1392),\
    (0.1564),\
    (0.1736),\
    (0.1908),\
    (0.2079),\
    (0.2250),\
    (0.2419),\
    (0.2588),\
    (0.2756),\
    (0.2924),\
    (0.3090),\
    (0.3256),\
    (0.3420),\
    (0.3584),\
    (0.3746),\
    (0.3907),\
    (0.4067),\
    (0.4226),\
    (0.4384),\
    (0.4540),\
    (0.4695),\
    (0.4848),\
    (0.5000),\
    (0.5150),\
    (0.5299),\
    (0.5446),\
    (0.5592),\
    (0.5736),\
    (0.5878),\
    (0.6018),\
    (0.6157),\
    (0.6293),\
    (0.6428),\
    (0.6561),\
    (0.6691),\
    (0.6820),\
    (0.6947),\
    (0.7071),\
    (0.7193),\
    (0.7314),\
    (0.7431),\
    (0.7547),\
    (0.7660),\
    (0.7771),\
    (0.7880),\
    (0.7986),\
    (0.8090),\
    (0.8192),\
    (0.8290),\
    (0.8387),\
    (0.8480),\
    (0.8572),\
    (0.8660),\
    (0.8746),\
    (0.8829),\
    (0.8910),\
    (0.8988),\
    (0.9063),\
    (0.9135),\
    (0.9205),\
    (0.9272),\
    (0.9336),\
    (0.9397),\
    (0.9455),\
    (0.9511),\
    (0.9563),\
    (0.9613),\
    (0.9659),\
    (0.9703),\
    (0.9744),\
    (0.9781),\
    (0.9816),\
    (0.9848),\
    (0.9877),\
    (0.9903),\
    (0.9925),\
    (0.9945),\
    (0.9962),\
    (0.9976),\
    (0.9986),\
    (0.9994),\
    (0.9998),\
    (1.0000),\
]");

const cos_table = py_eval("[\
    (1.0000),\
    (0.9998),\
    (0.9994),\
    (0.9986),\
    (0.9976),\
    (0.9962),\
    (0.9945),\
    (0.9925),\
    (0.9903),\
    (0.9877),\
    (0.9848),\
    (0.9816),\
    (0.9781),\
    (0.9744),\
    (0.9703),\
    (0.9659),\
    (0.9613),\
    (0.9563),\
    (0.9511),\
    (0.9455),\
    (0.9397),\
    (0.9336),\
    (0.9272),\
    (0.9205),\
    (0.9135),\
    (0.9063),\
    (0.8988),\
    (0.8910),\
    (0.8829),\
    (0.8746),\
    (0.8660),\
    (0.8572),\
    (0.8480),\
    (0.8387),\
    (0.8290),\
    (0.8192),\
    (0.8090),\
    (0.7986),\
    (0.7880),\
    (0.7771),\
    (0.7660),\
    (0.7547),\
    (0.7431),\
    (0.7314),\
    (0.7193),\
    (0.7071),\
    (0.6947),\
    (0.6820),\
    (0.6691),\
    (0.6561),\
    (0.6428),\
    (0.6293),\
    (0.6157),\
    (0.6018),\
    (0.5878),\
    (0.5736),\
    (0.5592),\
    (0.5446),\
    (0.5299),\
    (0.5150),\
    (0.5000),\
    (0.4848),\
    (0.4695),\
    (0.4540),\
    (0.4384),\
    (0.4226),\
    (0.4067),\
    (0.3907),\
    (0.3746),\
    (0.3584),\
    (0.3420),\
    (0.3256),\
    (0.3090),\
    (0.2924),\
    (0.2756),\
    (0.2588),\
    (0.2419),\
    (0.2250),\
    (0.2079),\
    (0.1908),\
    (0.1736),\
    (0.1564),\
    (0.1392),\
    (0.1219),\
    (0.1045),\
    (0.0872),\
    (0.0698),\
    (0.0523),\
    (0.0349),\
    (0.0175),\
    (0.0000),\
]");

const tan_table = py_eval("[\
    (0.0000),\
    (0.0175),\
    (0.0349),\
    (0.0524),\
    (0.0699),\
    (0.0875),\
    (0.1051),\
    (0.1228),\
    (0.1405),\
    (0.1584),\
    (0.1763),\
    (0.1944),\
    (0.2126),\
    (0.2309),\
    (0.2493),\
    (0.2679),\
    (0.2867),\
    (0.3057),\
    (0.3249),\
    (0.3443),\
    (0.3640),\
    (0.3839),\
    (0.4040),\
    (0.4245),\
    (0.4452),\
    (0.4663),\
    (0.4877),\
    (0.5095),\
    (0.5317),\
    (0.5543),\
    (0.5774),\
    (0.6009),\
    (0.6249),\
    (0.6494),\
    (0.6745),\
    (0.7002),\
    (0.7265),\
    (0.7536),\
    (0.7813),\
    (0.8098),\
    (0.8391),\
    (0.8693),\
    (0.9004),\
    (0.9325),\
    (0.9657),\
    (1.0000),\
    (1.0355),\
    (1.0724),\
    (1.1106),\
    (1.1504),\
    (1.1918),\
    (1.2349),\
    (1.2799),\
    (1.3270),\
    (1.3764),\
    (1.4281),\
    (1.4826),\
    (1.5399),\
    (1.6003),\
    (1.6643),\
    (1.7321),\
    (1.8040),\
    (1.8807),\
    (1.9626),\
    (2.0503),\
    (2.1445),\
    (2.2460),\
    (2.3559),\
    (2.4751),\
    (2.6051),\
    (2.7475),\
    (2.9042),\
    (3.0777),\
    (3.2709),\
    (3.4874),\
    (3.7321),\
    (4.0108),\
    (4.3315),\
    (4.7046),\
    (5.1446),\
    (5.6713),\
    (6.3138),\
    (7.1154),\
    (8.1443),\
    (9.5144),\
    (11.4301),\
    (14.3007),\
    (19.0811),\
    (28.6363),\
    (57.2900),\
    (0),\
]");

function sin(angle) {
    var sin;
    if (angle > 90 && angle <= 180) angle -= 90;
    else if (angle > 180 && angle <= 270) angle -= 180;
    else if (angle > 270 && angle <= 360) angle -= 270;
    else if (angle == 0) sin = 0;
    if (angle > 0) {
        foreach(i, x : py_enumerate(sin_table)) {
            if (angle == i) SetVariables(list(sin), py_int(x * 10000));
        }
    }

    return sin;
}

function cos(angle) {
    var cos;
    if (angle > 90 && angle <= 180) angle -= 90;
    else if (angle > 180 && angle <= 270) angle -= 180;
    else if (angle > 270 && angle <= 360) angle -= 270;
    else if (angle == 0) cos = 0;
    if (angle > 0) {
        foreach(i, x : py_enumerate(cos_table)) {
            if (angle == i) SetVariables(list(cos), py_int(x * 10000));
        }
    }

    return cos;
}

function tan(angle) {
    var tan;
    if (angle > 90 && angle <= 180) angle -= 90;
    else if (angle > 180 && angle <= 270) angle -= 180;
    else if (angle > 270 && angle <= 360) angle -= 270;
    else if (angle == 0) tan = 0;
    if (angle > 0) {
        foreach(i, x : py_enumerate(tan_table)) {
            if (angle == i) SetVariables(list(tan), py_int(x * 10000));
        }
    }

    return tan;
}

function getAngle(originX, originY, destX, destY) {
    const angle = atan2(originX - destX, originY - destY);
    return angle;
}

function getComponents(angle) {
    const componentX = cos(angle);
    const componentY = sin(angle);
    return componentX, componentY;
}

function getDistance(originX, originY, destX, destY) {
    const a = originX - destX;
    const b = originY - destY;
    const distance = sqrt( a*a + b*b );
    return distance;
}

function ray(posX, posY, angle, distance) {
    var compX, compY = getComponents(angle);
    compX *= distance;
    compY *= distance;
    compX /= 10000;
    compY /= 10000;
    var new_posX, new_posY = posX, posY;
    if (angle == 0 || angle == 360) {
        new_posY -= distance - 1;
    }
    else if (angle == 270) {
        new_posX += distance - 1;
    }
    else if (angle == 180) {
        new_posY += distance - 1;
    }
    else if (angle == 90) {
        new_posX -= distance - 1;
    }
    else if (angle >= 1 && angle <= 89) {
        new_posX -= compY;
        new_posY -= compX;
    }
    else if (angle >= 91 && angle <= 179) {
        new_posX -= compX;
        new_posY += compY;
    }
    else if (angle >= 181 && angle <= 269) {
        new_posX += compY;
        new_posY += compX;
    }
    else if (angle >= 271 && angle <= 359) {
        new_posX += compX;
        new_posY -= compY;
    }
    return new_posX, new_posY;
}

function flipAngle(angle) {
    var new_angle = angle;
    if (angle >= 180) {
        new_angle -= 180;
    } else {
        new_angle += 180;
    }
    return new_angle;
}

function arc(originX, originY, destX, destY) {
    const angle = getAngle(originX, originY, destX, destY);
    var posX, posY, posZ = originX, originY, 1;
    var calcY, s = 1,1;
    const distance = getDistance(originX, originY, destX, destY);
    const h = 500;
    for (var i = 0; i < distance; i++) {
        posX, posY = ray(posX, posY, angle, 20);
        s = getDistance(posX, posY, destX, destY);
        posZ = h*s*(distance - s) / (distance*distance);
        calcY = posY - posZ;
        //setloc(l_main, posX, calcY);
        //Utils.createImageSpriteAtLocation(440, l_main);
        if (s < 32) {
            break;
        }
    }
}

function between(num, min, max) {
    if (num>= min && num <= max) return true;
    return false;
}

function convertDirectionSC_simple(direction) {
    var converted_direction = 0;
    if (between(direction, 240, 255) || between(direction, 0, 16)) converted_direction = 1;
    else if (between(direction, 16, 48) ) converted_direction = 2;
    else if (between(direction, 48, 80) ) converted_direction = 3;
    else if (between(direction, 80, 112) ) converted_direction = 4;
    else if (between(direction, 112, 144) ) converted_direction = 5;
    else if (between(direction, 144, 176) ) converted_direction = 6;
    else if (between(direction, 176, 208) ) converted_direction = 7;
    else if (between(direction, 208, 240) ) converted_direction = 8;
    return converted_direction;
}

function convertDirectionSimple_deg(direction) {
    var converted_direction = 0;
    if (direction == 1) converted_direction = 0;
    else if (direction == 2) converted_direction = 315;
    else if (direction == 3) converted_direction = 270;
    else if (direction == 4) converted_direction = 225;
    else if (direction == 5) converted_direction = 180;
    else if (direction == 6) converted_direction = 135;
    else if (direction == 7) converted_direction = 90;
    else if (direction == 8) converted_direction = 45;
    return converted_direction;
}

function convertDirectionDegree_simple(direction) {
    var converted_direction = 0;
    if (between(direction, 0, 22) || between(direction, 338, 360)) converted_direction = 1;
    else if (between(direction, 293, 337) ) converted_direction = 2;
    else if (between(direction, 248, 292) ) converted_direction = 3;
    else if (between(direction, 203, 247) ) converted_direction = 4;
    else if (between(direction, 158, 202) ) converted_direction = 5;
    else if (between(direction, 113, 157) ) converted_direction = 6;
    else if (between(direction, 68, 112) ) converted_direction = 7;
    else if (between(direction, 23, 67) ) converted_direction = 8;
    return converted_direction;
}

